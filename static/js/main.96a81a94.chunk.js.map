{"version":3,"sources":["components/Searchbar.js","components/ImageGalleryItem.js","components/Modal.js","components/ImageGallery.js","components/Button.js","App.js","index.js"],"names":["Searchbar","state","query","handleChange","e","setState","target","value","toLowerCase","handleSubmit","preventDefault","trim","toast","error","props","onSubmit","className","this","type","onChange","name","autoComplete","autoFocus","placeholder","Component","ImageGalleryItem","image","webformatURL","tags","src","alt","showModal","onOpen","modalRoot","document","querySelector","Modal","onCloseByClick","nodeName","onClose","onCloseByKedown","code","console","log","window","addEventListener","removeEventListener","images","largeImageURL","tag","createPortal","ImageGallery","modalImage","includes","closeModal","toggleModal","map","id","Button","onClick","App","mainURL","secondaryURL","myKey","page","status","pageReset","searchQuery","loadMore","prev","fetch","then","response","ok","json","Promise","reject","Error","prevState","hits","prevProps","scrollTo","top","documentElement","scrollHeight","behavior","autoClose","color","height","width","timeout","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.96a81a94.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nclass Searchbar extends Component {\r\n    state = {\r\n        query:'',\r\n    }\r\n    handleChange = (e) => {\r\n        this.setState({query: e.target.value.toLowerCase()})        \r\n    }\r\n    handleSubmit = (e) => {\r\n        e.preventDefault();\r\n\r\n        if (this.state.query.trim() === '') {\r\n            return toast.error(\"Enter search query!\")\r\n           \r\n        }\r\n        this.props.onSubmit(this.state.query)\r\n        this.setState({ query: '' });\r\n    }\r\n    render() {\r\n        return (\r\n            <header className=\"Searchbar\">\r\n                <form onSubmit={this.handleSubmit}className=\"SearchForm\">\r\n                    <button type=\"submit\" className=\"SearchForm-button\">\r\n                        <span className=\"SearchForm-button-label\">Search</span>\r\n                    </button>\r\n                    <input\r\n                        className=\"SearchForm-input\"\r\n                        onChange={this.handleChange}\r\n                        value={this.state.query}\r\n                        name='query'\r\n                        type=\"text\"\r\n                        autoComplete=\"off\"\r\n                        autoFocus\r\n                        placeholder=\"Search images and photos\"\r\n                    />\r\n                </form>\r\n            </header>\r\n        )\r\n    }\r\n}\r\nexport default Searchbar","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass ImageGalleryItem extends Component{\r\n    render() {\r\n        const {webformatURL, tags,} = this.props.image\r\n        return (\r\n            <li className=\"ImageGalleryItem\">\r\n                <img\r\n                    src={webformatURL}\r\n                    alt={tags}\r\n                    className=\"ImageGalleryItem-image\"\r\n                    showModal={this.props.onOpen}\r\n                />\r\n            </li>\r\n        )\r\n    }\r\n}\r\n\r\nImageGalleryItem.propTypes = {\r\n  image: PropTypes.object.isRequired,\r\n  onOpen: PropTypes.func.isRequired,\r\n};\r\nexport default ImageGalleryItem\r\n\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nexport default class Modal extends Component{\r\n     \r\n    componentDidMount() {\r\n        console.log('componentDidMount');\r\n         window.addEventListener('click', this.onCloseByClick)\r\n         window.addEventListener('keydown', this.onCloseByKedown)\r\n    }\r\n    componentWillUnmount() {\r\n        console.log('componentWillUnmount');\r\n         window.removeEventListener ('keydown', this.onCloseByKedown)\r\n    }\r\n    onCloseByClick = (e) => {\r\n        if (e.target.nodeName === \"DIV\") {\r\n            this.props.onClose()\r\n        }\r\n    }\r\n    onCloseByKedown = (e) => {\r\n        if (e.code === 'Escape') {\r\n            this.props.onClose()\r\n        }\r\n    }\r\n    render() {\r\n        // console.log(this.props.images);\r\n        const { largeImageURL, tag } = this.props.images\r\n\r\n        return createPortal(\r\n            <div className=\"Overlay\">\r\n                <div className=\"Modal\">\r\n                    <img\r\n                        src={largeImageURL}\r\n                        alt={tag} />\r\n                </div>\r\n            </div>,\r\n            modalRoot,\r\n        )\r\n    }\r\n    \r\n}\r\n\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport ImageGalleryItem from './ImageGalleryItem';\r\nimport Modal from './Modal';\r\n\r\n\r\nclass ImageGallery extends Component {\r\n  state = {\r\n    showModal: false,\r\n    modalImage: '',\r\n  }\r\n  \r\n  componentDidMount() {\r\n    console.log('componentDidMount');\r\n    window.addEventListener('click', e => {\r\n      console.log(e.target.src);\r\n      if (e.target.nodeName === \"IMG\") {\r\n        this.toggleModal();\r\n      }\r\n      // if (e.target.src === this.props.images.src) {\r\n        \r\n      //   this.setState({ modalSRC: this.props.images.src })\r\n      //   console.log(this.state);\r\n      // }\r\n    } )\r\n  }\r\n  showModal = (e) => {\r\n    console.log(e.target.src);\r\n    this.setState({ showModal: true })\r\n    const modalImage = this.props.images.includes(e.target.src)\r\n    return this.state({modalImage})\r\n  }\r\n  closeModal = () => {\r\n    this.setState(({ showModal: false }))\r\n  };\r\n  render() {\r\n    const { images } = this.props\r\n    // console.log({images});\r\n    return (\r\n      \r\n      <ul className=\"ImageGallery\">\r\n        {\r\n         images.map((image) => \r\n           <ImageGalleryItem\r\n             key={image.id}\r\n             image={image}\r\n             onOpen={this.showModal}\r\n           />\r\n          )}\r\n        {this.showModal && <Modal\r\n          onClose={this.closeModal}\r\n          images={images} />}\r\n\r\n  \r\n      </ul>\r\n    )\r\n  }\r\n  \r\n  \r\n} \r\n\r\nexport default ImageGallery\r\n","import React, { Component } from \"react\";\r\n\r\nclass Button extends Component{\r\n    render() {\r\n        return (\r\n            <button\r\n                type='button'\r\n                className='Button'\r\n                onClick={this.props.onClick}\r\n            \r\n            >\r\n                Load more\r\n            </button>\r\n        )\r\n    }\r\n}\r\nexport default Button","import React, { Component } from 'react';\nimport './App.css';\nimport './styles/common.css'\nimport { ToastContainer} from 'react-toastify';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport Loader from \"react-loader-spinner\";\nimport Button from './components/Button';\n\n\nclass App extends Component {\n  state = {\n    mainURL: 'https://pixabay.com/api/',\n    secondaryURL:'&image_type=photo&orientation=horizontal&per_page=12',\n    images: [],\n    myKey:'24253422-4477825d93e6eb518eebc16ed',\n    query: '',\n    page: 1,\n    status: 'idle',\n    error: null,\n\n  }\n   \n  componentDidUpdate(prevProps, prevState) {\n    const { mainURL, secondaryURL, query, page, myKey } = this.state;\n    \n    if (prevState.query !== query) {\n      this.setState({ status: 'pending' })\n      \n      fetch(`${mainURL}?q=${query}&page=${page}&key=${myKey}${secondaryURL}`)\n      .then(response => {\n        if (response.ok) {\n          return response.json()\n        }\n        return Promise.reject(new Error(`Can not find ${query}!`));\n      })\n        .then((response) => {\n          // console.log(response);\n          // console.log(response.hits);\n          this.setState({ images: response.hits, page: page + 1, status: 'resolved' })\n          // console.log(this.state.page);\n        })\n      \n\n      if (page > 1) {\n        window.scrollTo({\n              top: document.documentElement.scrollHeight,\n              behavior: \"smooth\",\n        });\n      }\n    }\n    \n  }\n  pageReset = () => {\n    this.setState({page: 1})\n  }\n  searchQuery = query => {\n    this.setState({ query });\n    this.pageReset();\n  }\n  loadMore = () => {\n    this.setState((prev) => ({ page: prev.page + 1 }))\n    \n    const { mainURL, secondaryURL, query, page, myKey } = this.state;\n      // console.log(page);\n      fetch(`${mainURL}?q=${query}&page=${page}&key=${myKey}${secondaryURL}`)\n      .then(response => {\n        if (response.ok) {\n          return response.json()\n        }\n        return Promise.reject(new Error(`Can not find ${query}!`));\n      })\n      .then((response) => {\n        this.setState((prevState) => ({ images: [...prevState.images, ...response.hits], status: 'resolved' }))\n        \n      })\n     \n    }\n  \n \n  render() {\n    const { status, images } = this.state\n    // console.log(images);\n    return (\n      <>\n      <Searchbar onSubmit={this.searchQuery} />\n      <ToastContainer autoClose={3000} />\n        {status === 'resolved' &&\n          <ImageGallery\n            images={images}/>\n        }\n        {status === 'pending' &&\n          <Loader\n            className='Loader'\n            type=\"Puff\"\n            color=\"#00BFFF\"\n            height={50}\n            width={50}\n            timeout={3000} />\n        }\n        {status === 'resolved' && <Button onClick={this.loadMore}/>\n        }\n    </>\n   )\n  }\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}